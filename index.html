<html>
<head>
  <meta charset=utf-8 />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firebase Cloud Messaging Example</title>

  <!-- Material Design Theming -->
 <script src="https://www.gstatic.com/firebasejs/4.11.0/firebase.js"></script>
 
 <script src="jquery-3.3.1.min.js"></script>
<script>
		  // Initialize Firebase
		  var config = {
			apiKey: "AIzaSyDCDnUzPUCH9PrzqtcN523K06OdqANYT7g",
			authDomain: "notif-30a21.firebaseapp.com",
			databaseURL: "https://notif-30a21.firebaseio.com",
			projectId: "notif-30a21",
			storageBucket: "notif-30a21.appspot.com",
			messagingSenderId: "923195964476"
		  };
		  firebase.initializeApp(config);
		  
		  // Retrieve Firebase Messaging object.
		const messaging = firebase.messaging();

		messaging.requestPermission()
		.then(function() {
		  console.log('Notification permission granted.');
		  panggil();

		if(isTokenSentToServer()) {
		 console.log('Token telah di buat');
		  alert("Hello! I am an alert box!");
		}else{
		 alert("SALAH2");
		}
		})
		.catch(function(err) {
		  console.log('Unable to get permission to notify.', err);
		});
  

function panggil(){
alert("SALAH1");
 messaging.getToken().then(function(currentToken) {
    if (currentToken) {
	alert("SALAH3");
      sendTokenToServer(currentToken);
      updateUIForPushEnabled(currentToken);
    } else {
      // Show permission request.
      console.log('No Instance ID token available. Request permission to generate one.');
      // Show permission UI.
      updateUIForPushPermissionRequired();
      setTokenSentToServer(false);
    }
  }).catch(function(err) {
    console.log('An error occurred while retrieving token. ', err);
    showToken('Error retrieving Instance ID token. ', err);
    setTokenSentToServer(false);
  });

}


 function showToken(currentToken) {
    // Show token in console and UI.
    var tokenElement = document.querySelector('#token');
    tokenElement.textContent = currentToken;
  }


	function setTokenSentToServer(sent) {
		window.localStorage.setItem('sentToServer', sent ? 1 : 0);
	  }
	  
	  function isTokenSentToServer() {
		return window.localStorage.getItem('sentToServer') === 1;
	  }

  
  
</script>
 

  <link rel="manifest" href="/github/manifest.json">
</head>
<body>
<center>

<H1>COBA</h1>
<h2>BISMilah9</h2>

</center>
</body>
</html>